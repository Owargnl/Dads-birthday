<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>HAPPY BIRTHDAY DAD</title>
  <style>
    :root{
      --confetti-colors: #e63946,#f4d35e,#2a9d8f,#457b9d,#9b5de5,#ff7b00,#ff69b4;
      --sky: #87CEEB;
    }

    html,body{
      height:100%;
      margin:0;
      background:var(--sky);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      overflow:hidden;
    }

    .center {
      position:relative;
      z-index:2;
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
    }

    h1{
      margin:0;
      font-weight:800;
      font-size:clamp(32px, 8vw, 120px);
      line-height:0.95;
      color:#023047;
      text-shadow: 0 2px 0 rgba(255,255,255,0.15);
    }

    .confetti-wrap{
      position:fixed;
      inset:0;
      z-index:1;
      pointer-events:none;
      overflow:hidden;
    }

    .confetti{
      position:absolute;
      top:-60px; /* start above viewport */
      will-change:top,transform,opacity;
      border-radius:2px;
      opacity:0.95;
      transform-origin:center;
      pointer-events:none;
      /* initial rotation uses custom property so spin animation starts smoothly */
      --rz: 0deg;
      transform: rotateZ(var(--rz));
    }

    /* Fall uses 'top' (not transform) to avoid animation conflicts with spin */
    @keyframes fall {
      from { top: -60px; opacity:1 }
      to   { top: calc(100vh + 60px); opacity:1 }
    }

    /* Spin uses transform only and reads the initial rotation from --rz */
    @keyframes spinZ {
      from { transform: rotateZ(var(--rz)) }
      to   { transform: rotateZ(calc(var(--rz) + 360deg)) }
    }

    @media (prefers-reduced-motion: reduce){
      .confetti { animation: none !important; }
    }
  </style>
</head>
<body>

  <div class="confetti-wrap" aria-hidden="true"></div>

  <div class="center">
    <h1>HAPPY BIRTHDAY<br>DAD.</h1>
  </div>

  <script>
    (function(){
      const rootStyle = getComputedStyle(document.documentElement);
      const colors = rootStyle.getPropertyValue('--confetti-colors').split(',').map(s=>s.trim()).filter(Boolean);
      const wrap = document.querySelector('.confetti-wrap');

      // Controls
      let spawning = true;
      let intervalId = null;

      function rand(min,max){ return Math.random()*(max-min)+min }

      function createConfetti(){
        if(!spawning) return;

        const el = document.createElement('div');
        el.className = 'confetti';

        // size: small rectangle
        const w = Math.round(rand(6,14));
        const h = Math.round(rand(12,28));
        el.style.width = w + 'px';
        el.style.height = h + 'px';

        // color
        el.style.background = colors[Math.floor(rand(0,colors.length))] || '#f4d35e';

        // horizontal position
        el.style.left = Math.round(rand(0,100)) + '%';

        // initial rotation stored in CSS custom prop so spin animation starts from this angle
        const rz = Math.round(rand(0,360));
        el.style.setProperty('--rz', rz + 'deg');

        // durations
        const duration = rand(12,22); // fall time in seconds (slow)
        const spinDuration = rand(6,12); // rotation speed

        // animate fall via 'top' and spin via 'transform' (no conflicting properties)
        el.style.animation = `fall ${duration}s linear 0s forwards, spinZ ${spinDuration}s linear ${rand(0,spinDuration)}s infinite`;

        // subtle opacity variation
        el.style.opacity = rand(0.8,1).toFixed(2);

        wrap.appendChild(el);

        // Remove element after animation completes to avoid DOM bloat
        setTimeout(()=>{
          if(el.parentNode){ el.parentNode.removeChild(el); }
        }, (duration + 0.5) * 1000);
      }

      function startSpawning(rateMs = 200){
        if(intervalId) clearInterval(intervalId);
        intervalId = setInterval(createConfetti, rateMs);
      }

      function stopSpawning(){
        spawning = false;
        if(intervalId) { clearInterval(intervalId); intervalId = null; }
      }

      function resumeSpawning(){
        if(spawning) return;
        spawning = true;
        startSpawning();
      }

      // start immediately
      startSpawning(220);

      // create an initial burst so user doesn't have to wait or reload
      for(let i=0;i<24;i++){
        setTimeout(createConfetti, i * 60);
      }

      // keyboard controls: 's' to stop spawning new confetti, 'r' to resume
      window.addEventListener('keydown', (e) => {
        if(e.key.toLowerCase() === 's'){
          stopSpawning();
        }
        if(e.key.toLowerCase() === 'r'){
          resumeSpawning();
        }
      });

      // Expose functions for debugging from console if desired
      window.__confetti = { stop: stopSpawning, resume: resumeSpawning, create: createConfetti };

    })();
  </script>
</body>
</html>

